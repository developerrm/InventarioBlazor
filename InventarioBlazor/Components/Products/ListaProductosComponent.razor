@using Entidades
@using Business
<h3>Lista Productos</h3>
<hr />
<a href="product/create">Crear nuevo producto</a>
<hr />
<select class="form-control" @onchange="CategoriaChanged">
    <option value="">Seleccione una categoria</option>
    @foreach (var categoria in categoriaList)
    {
        <option value="@categoria.CategoriaID">@categoria.Descripcion</option>
    }
</select>

<div class="row row-cols-1 row-cols-md-2 g-4">
    @foreach (var producto in productosList_temp)
    {
        <div class="col">
            <div class="card">
                <img src="data:image/jpeg;base64,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" class="card-img-top" alt="...">
                <div class="card-body">
                    <h5 class="card-title">@producto.Codigo</h5>
                    <p class="card-text">@producto.Descripcion</p>
                    <p> <b> Cantidad: </b> </p> @producto.CantidadTotal
                    <br/>
                    <a class="btn btn-primary" href="/product/Update/@producto.ProductoID">Editar</a>
                </div>
            </div>
        </div>
    }
</div>
@*

<table class="table table-hover table-bordered">
    <thead>
    <th>Codigo</th>
    <th>Descripcion</th>
    <th>Categoria</th>
    <th>Cantidad</th>
    <th></th>
    </thead>
    <tbody>
        @foreach (var producto in productosList_temp)
        {
            <tr>
                <td>@producto.Codigo</td>
                <td>@producto.Descripcion</td>
                <td>@producto.Categoria.Descripcion</td>
                <td>@producto.CantidadTotal</td>
                <td><a href="/product/Update/@producto.ProductoID">Editar</a></td>
            </tr>
        }
    </tbody>
</table>*@

@code {
    List<Producto> productosList = new List<Producto>();
    List<Producto> productosList_temp = new List<Producto>();
    List<Categoria> categoriaList = new List<Categoria>();
    string message = "";
    protected override async Task OnParametersSetAsync()
    {
        productosList = BProducto.ProductoList();
        productosList_temp = productosList;
        categoriaList = BCategoria.CategoriaList();
    }
    private void CategoriaChanged(ChangeEventArgs e)
    {
        message = e.Value.ToString();
        if (e.Value.ToString().Length > 0)
            productosList_temp = productosList.Where(x => x.CategoriaID.ToString() == e.Value.ToString()).ToList();
    }
}
